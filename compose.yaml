services:
  keycloak:
    image: quay.io/keycloak/keycloak:26.3.3@sha256:6a7217a100bd3e5de4063a27a538ef999a3c5a88c4b4ec0ffc0a642aee7b2597
    volumes:
      - ${PWD}/src/theme:/opt/keycloak/themes
      - ${PWD}/realms:/opt/keycloak/data/import:ro
    command:
      - start-dev
      - --import-realm
      - --spi-theme-static-max-age=-1
      - --spi-theme-cache-themes=false
      - --spi-theme-cache-templates=false
    ports:
      - 8080:8080
    environment:
      - KC_BOOTSTRAP_ADMIN_USERNAME=admin
      - KC_BOOTSTRAP_ADMIN_PASSWORD=dev_only
      - KC_LOG_LEVEL=info,at.worlddirect:trace
